<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Who survived the Titanic?</title>
    <meta charset="utf-8" />
    <meta name="author" content="XEM Team   Chenyu Li, Emma Ghelfi, Maria Stylianou, Xiao Hu" />
    <meta name="date" content="2021-12-02" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Who survived the Titanic?
## Factors contributing to the survival of passengers in the historic Titanic accident of 1912
### XEM Team <br> Chenyu Li, Emma Ghelfi, Maria Stylianou, Xiao Hu
### University of Edinburgh
### 2021-12-02

---










#Table of Contents
- Background information
- Introduction to data set
- Data analysis
  - Gender vs. Survival
  - Age vs. Survival
  - Class vs. Survival
- Modelling
- Recreation of historic plot
- Bibliography

---
"Touted as the ultimate in transatlantic travel and said to be “unsinkable”, the Titanic collided with an iceberg on 14 April 1912 on her maiden voyage and sank shortly thereafter on 15 April, killing 1502 out of 2224 passengers and crew." [1]

We want to see 

### If and how the chance of survival of Titanic passengers is related to different attributes of the passengers 

---
# Data set
* The data set comes from the Awesome Public Data Sets on GitHub[2]

* There are 12 variables and 891 observations in this data set. 
--
- `Name`: Name and Surname of passenger, if available 
- `Survived`: If passenger survived (0 = No, 1 = Yes)
- `Sex`: Gender of passenger (male or female)
- `Age`: Age in years
- `Pclass`: Passenger class (1 = 1st, 2 = 2nd, 3 = 3rd) 
- `Fare`: Passenger fare (i.e. cost of ticket in USD)
- `Embarked`: Port of embarkation (C = Cherbourg, Q = Queenstown, S = Southampton)[3] 

---
class: inverse, middle, center
# Gender and Survival

---

# Introduction
* During the times when the sinking of the Titanic accident occurred (1912), in the spirit of chivalry women (and children) were saved first. This was historically recorded as orders from the captain of the Titanic.
--



* Women have higher survival rate than men. 

---

# Visualization
.pull-left[
- Use gender as the predictor variable and frequency displayed in terms of colors showing survivals or not as the outcome variable.
]

.pull-right[
&lt;img src="presentation_files/figure-html/gender-survival-1.png" width="100%" /&gt;
]


---
# Summary
.pull-left[
- The proportion of women passengers who survived is 0.68 
- The proportion of men passengers who survived is 0.32
]
.pull-right[

```
##      Sex   n prop_survival
## 1 female 233     0.6812865
## 2   male 109     0.3187135
```
]
---

class: inverse, middle, center
# Age and Survival
---
# Introduction
- give priority to saving infants and children when it comes to providing life saving equipment

- physical abilities
---
# Data analysis 
.pull-left[
&lt;img src="presentation_files/figure-html/age-survival-1.png" width="90%" /&gt;
]


.pull_right[

- Predicted variable are "Age" and "Frequency" as the outcome variable. 
- generally, the younger the more people survived.
]
---


.pull_left


&lt;img src="presentation_files/figure-html/unnamed-chunk-1-1.png" width="80%" /&gt;

---

class: inverse, middle, center
# Class/ Port/ Fare vs Survival
---

The class of the passenger can be considered to be a measure of their socio-economic status: based on our knowledge on the Titanic disaster we expect to find that the higher the class of the passenger, the higher their survival rate.

&lt;img src="presentation_files/figure-html/class-survival -1.png" width="80%" /&gt;

---
&lt;img src="presentation_files/figure-html/fare-survival -1.png" width="80%" /&gt;

---







&lt;img src="presentation_files/figure-html/unnamed-chunk-4-1.png" width="80%" /&gt;

---
&lt;img src="presentation_files/figure-html/unnamed-chunk-5-1.png" width="80%" /&gt;
---

&lt;img src="presentation_files/figure-html/unnamed-chunk-6-1.png" width="80%" /&gt;

---
class: inverse, center, middle

# Predictive model for survival on the titanic

---







### Aim of the model 

+ 
fitting a binary logistic regression machine learning model using tidymodels library
testing the trained model’s prediction (model evaluation) strength on the unseen/test data set using various evaluation metrics.
+ parsimonious model (*Occam's razor*)

---
### Modelling Survival
+ **predictor/explanatory variables**:
  + Age
  + Passenger class
  + Gender
+ **ID variable**: passenger ID
+ **response variable**: survival
  + categorical, two levels ...
{{content}}
--
`\(\rightarrow\)` **logistic regression modelling**
--


&lt;table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std.error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p.value &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.507964 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5485891 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.217379 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000000 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Pclass_X2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.404192 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.3108647 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -4.517053 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000063 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Pclass_X3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2.534301 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2976274 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -8.515014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000000 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Sex_male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2.692213 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2452372 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -10.977996 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000000 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Age_X.6.18. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.798770 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5299473 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -3.394242 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0006882 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Age_X.18.54. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.707502 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4512209 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -3.784181 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0001542 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Age_X.54.80. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2.797834 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.6468346 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -4.325424 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000152 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
---
.pull-left[
### Modelling Survival: Interpretation
Note: using main effects (vs. interactions) `\(\rightarrow\)` results can still be interpreted with 3 explanatory variables.  
**Intercept**: 
&gt; Positive intercept for baseline (i.e. female, first class passenger, aged 0-6) is expected to survive.
]
.pull-right[
&lt;table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std.error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p.value &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.507964 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5485891 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.217379 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000000 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Pclass_X2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.404192 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.3108647 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -4.517053 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000063 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Pclass_X3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2.534301 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2976274 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -8.515014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000000 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Sex_male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2.692213 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2452372 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -10.977996 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000000 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Age_X.6.18. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.798770 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5299473 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -3.394242 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0006882 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Age_X.18.54. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.707502 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4512209 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -3.784181 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0001542 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Age_X.54.80. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2.797834 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.6468346 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -4.325424 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000152 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

--

Negative **Coefficents** for a term:
&gt; All else held constant, a negative coefficient reflects a lower likelyhood of survival compared to the corresponding baseline variable. 

**Class**: 1st class `\(\rightarrow\)` 2nd class `\(\rightarrow\)` 3rd class

**Sex**: female `\(\rightarrow\)` male

**Age**: children (0-6) `\(\rightarrow\)` teenagers/ adults (6-18 and 18-54) `\(\rightarrow\)` elderly (54 - 80)
---


### 🔍 A look at what the model predicts
10 random observations from the test sample with the model's prediction and the outcome variable. 
&lt;table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:center;"&gt; Probability to survive &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Survived &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Passenger ID &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.527 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 156 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.943 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 231 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.215 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 801 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.943 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 178 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.081 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 287 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.081 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 58 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.802 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 313 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.081 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 877 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.081 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 443 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0.215 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 293 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

???

looking at this a with some trial and error we've decided a cutoff proabbility of 0.6 and then plotted ROC curve ... next slide

---
###Evaluating the model: ROC curve
&lt;img src="presentation_files/figure-html/titanic-roc-curve-1.png" width="80%" /&gt;
---
###Evaluating the model: Statistical tests
.pull-left[
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;  &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Not Survived &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Survived &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; predicted not to survive &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 89 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Predicted to survive &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&amp;nbsp;  
&lt;table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:center;"&gt; Metric &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Estimate &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; sens &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.947 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; spec &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.592 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; kap &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.581 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; mcc &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.600 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[

**Sensitivity** `\(=TP/(FN+TP)\)`

**Specificity** `\(=TN/(FP+TN)\)`

**Kappa** `\(\in[-1,1]\)`  
How much better the model is over the random classifier. (here moderate agreement)

**Matthews Correlation Coefficient (MCC)** `\(\in[-1,1]\)`  
Produces high score if the prediction obtained good results in TP, FN, TN, FP, proportionally to the size of positive elements and the size of negative elements in the dataset. (here moderate agreement)
]

---


class: inverse, center, middle

# Recreating G. Bron's "Sphere" Diagram

---
## G. Bron's original Diagram on "the Sphere", 1912
.left-column[
&lt;div class="figure" style="text-align: right"&gt;
&lt;img src="https://www.researchgate.net/profile/Michael-Friendly/publication/330916468/figure/fig1/AS:723679168196613@1549549967751/GBrons-chart-of-The-Loss-of-the-Titanic-from-The-Sphere-4-May-1912-Each-subgroup.png" alt="G.Bron's chart of 'The Loss of the Titanic', 4 May 1912." width="120%" /&gt;
&lt;p class="caption"&gt;G.Bron's chart of 'The Loss of the Titanic', 4 May 1912.&lt;/p&gt;
&lt;/div&gt;
]
.right-column[
+ **The Sphere**: British weekly newspaper dedicated to worldwide reporting on popular issues. 
{{content}}
]
--
+ G. Bron, graphic artist, used data released the week before by the House of Commons for the visualisation pubblished **three weeks after the Titanic disaster**
{{content}}
--
+  Bron’s graph is an early innovation in data display:
{{content}}
--
    + each subgroup shown by a bar with **area proportional to the numbers of cases**
{{content}}   
--
    + Within the passenger classes, the bars are subdivided by gender for adults, while children are shown as a separate group. 
{{content}}
--
    + It also includes **summary panels**, showing the totals for passengers and crew.
{{content}}
--
+  Today: see as an early **mosaic plot**, or area-proportional back-to-back array of bar charts
---

## Recreation, mosaic plot


&lt;img src="presentation_files/figure-html/mosaic plot-1.png" width="80%" style="display: block; margin: auto;" /&gt;


---
## Aside

.pull-left[
Brath (2018) created mosaic plots filling the tiles with the names of the victims and survivors among the 1308 passengers. 

&gt; This highlights the fact that the passengers were people, not statistics. It's common to overlook on this while handling data that has to do with casualties.

* This is also an example of how typography could be used in data visualization.
]

.pull-right[
&lt;img src="img/brath2018.png" width="100%" /&gt;
]

.footnote[
Brath, Richard. 2018. “Text in Visualization: Extending the Visualization Design Space.” PhD thesis, London South Bank University.
]

---
#Bibliography
[1] Source: Friendly, M., Symanzik, J., &amp;amp; Onder, O. (2019, February 6). Royal Statistical Society Publications. Royal Statistical Society. Retrieved November 19, 2021, from https://rss.onlinelibrary.wiley.com/doi/full/10.1111/j.1740-9713.2019.01229.x. 

https://rkabacoff.github.io/datavis/Models.html#Mosaic 


https://www.datavis.ca/papers/titanic/

https://www.datavis.ca/papers/titanic/ 

[2] https://github.com/awesomedata/awesome-public-datasets

[3] https://www.kaggle.com/c/titanic/data

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
